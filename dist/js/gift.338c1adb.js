(function(e){function t(t){for(var r,o,i=t[0],u=t[1],c=t[2],d=0,f=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(f.length)f.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],r=!0,i=1;i<s.length;i++){var u=s[i];0!==a[u]&&(r=!1)}r&&(n.splice(t--,1),e=o(o.s=s[0]))}return e}var r={},a={gift:0},n=[];function o(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=r,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(s,r,function(t){return e[t]}.bind(null,r));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;n.push([1,"chunk-vendors"]),s()})({0:function(e,t){},1:function(e,t,s){e.exports=s("78a2")},"52c4":function(e,t,s){},"70c8":function(e,t,s){"use strict";s("f559");var r=s("2b0e");t["a"]={beforeCreate:function(){r["default"].http.options.root=window.m.urlRoot,r["default"].http.interceptors.push((function(e,t){e.url.startsWith("user/authenticate")||(e.xhr=e.xhr||{},e.xhr.withCredentials=!0,localStorage.token&&e.headers.set("Authorization","Bearer "+localStorage.getItem("token"))),t()}))}}},"78a2":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("f751"),s("097d");var r=s("2b0e"),a=s("28dd"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("gift-form-section",{attrs:{user:e.user,purchaseInfo:e.purchaseInfo}}),s("gift-testimonials")],1)},o=[],i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"gift-form"},[s("div",{staticClass:"gift-form-wrapper"},[e.sectionState.showAnonymous?s("gift-form-anonymous",{attrs:{user:e.user,purchaseInfo:e.purchaseInfo},on:{login:e.login}}):e._e(),e.sectionState.showLogin?s("gift-form-login",{attrs:{user:e.user,purchaseInfo:e.purchaseInfo,backLabel:"Back to Buy Gift"},on:{back:function(t){return e.showSection("anonymous")},loginComplete:e.refreshFormState}}):e._e(),e.sectionState.showLoggedIn?s("gift-form-logged-in",{ref:"loggedin",attrs:{user:e.user,purchaseInfo:e.purchaseInfo},on:{logout:e.logout}}):e._e(),e.sectionState.showPurchased?s("gift-purchased",{attrs:{purchaseInfo:e.purchaseInfo}}):e._e()],1)])},u=[],c=(s("3b2b"),s("a481"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"gift-form-buy"},[s("h2",[e._v("Buy a gift for someone special today")]),s("p",{staticClass:"subheading gift-form-subheading"},[s("span",{staticClass:"heading-text"},[e._v("Already have an account?")]),s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v("Login")])]),s("form",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.card.name,expression:"card.name"}],staticClass:"name",attrs:{type:"text",placeholder:"Your Name",disabled:e.emailExists},domProps:{value:e.card.name},on:{blur:e.resetState,input:function(t){t.target.composing||e.$set(e.card,"name",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"email",attrs:{type:"text",placeholder:"Your Email"},domProps:{value:e.user.email},on:{keyup:e.onEmailKeyup,blur:e.onEmailBlur,input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),s("p",{directives:[{name:"show",rawName:"v-show",value:e.emailExists,expression:"emailExists"}],staticClass:"gift-form-message gift-found-account"},[s("span",{staticClass:"gift-found-account-message"},[e._v("We found an account for that email.")]),s("a",{staticClass:"gift-form-button",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v("Login to continue")]),s("a",{staticClass:"gift-form-button gift-form-button-secondary",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.useOtherEmail(t)}}},[e._v("Use a different email")])]),s("credit-card",{ref:"creditcard",attrs:{disabled:e.emailExists,card:e.card},on:{captureSuccess:e.captureSuccess,captureFailed:e.captureFailed,resetState:e.resetState}}),s("gift-form-buy",{attrs:{disabled:e.emailExists,purchaseInfo:e.purchaseInfo,buttonText:"Buy Gift",inProgress:e.inProgress,errorMessage:e.errorMessage},on:{buttonClicked:e.buyClicked}})],1)])}),l=[],d=(s("28a5"),s("57e7"),s("7f7f"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"gift-add-card-container"},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.showCancel,expression:"showCancel"}],staticClass:"gift-form-action gift-add-card-cancel",on:{click:e.cancel}},[e._v("Cancel")]),s("input",{directives:[{name:"show",rawName:"v-show",value:e.showCardName,expression:"showCardName"},{name:"model",rawName:"v-model",value:e.card.name,expression:"card.name"}],attrs:{type:"text",placeholder:"Name on Card",disabled:e.disabled},domProps:{value:e.card.name},on:{input:function(t){t.target.composing||e.$set(e.card,"name",t.target.value)}}}),s("div",{ref:"cardnumber",staticClass:"input",attrs:{id:"card-number",disabled:e.disabled}}),s("div",{staticClass:"gift-form-half-row"},[s("div",{staticStyle:{"font-size":"0"}},[s("div",{ref:"expiry",staticClass:"input",attrs:{id:"card-expiry",disabled:e.disabled}}),s("div",{ref:"cvc",staticClass:"input",attrs:{id:"card-cvc",disabled:e.disabled}})])])])}),f=[],h=null,p=null,g=null,v=null,b={data:function(){return{elements:null}},props:["user","card","showTitle","showCancel","disabled","showCardName"],mounted:function(){v=Stripe(window.m.stripePublishableKey),this.populateForm()},methods:{populateForm:function(){var e={base:{lineHeight:"normal",fontFamily:'-apple-system, BlinkMacSystemFont, "Neue Haas Grotesk Text Pro", "Helvetica Neue", Helvetica, Arial, sans-serif',fontSize:"18px"}},t={focus:"focused",empty:"empty",invalid:"invalid"};this.elements=v.elements(),h=this.elements.create("cardNumber",{style:e,classes:t,placeholder:"Credit Card Number"}),h.mount("#card-number"),p=this.elements.create("cardExpiry",{style:e,classes:t}),p.mount("#card-expiry"),g=this.elements.create("cardCvc",{style:e,classes:t,placeholder:"Security Code"}),g.mount("#card-cvc");var s=this;h.addEventListener("change",(function(e){s.errorHandling(e)})),p.addEventListener("change",(function(e){s.errorHandling(e)})),g.addEventListener("change",(function(e){s.errorHandling(e)}))},errorHandling:function(e){if(e.error){var t=e.error.message;this.$emit("captureFailed",{error:t})}else this.$emit("resetState")},cancel:function(){this.$emit("cancel")},capture:function(){var e=this,t=this.card,s=null;if(t.name&&0!==t.name.length||(s="Please enter the name that appears on the credit card."),s)this.$emit("captureFailed",{error:s});else{var r={name:t.name};v.createToken(h,r).then((function(t){t.error?e.$emit("captureFailed",{error:t.error.message}):e.$emit("captureSuccess",t)}))}}}},y=b,_=s("2877"),w=Object(_["a"])(y,d,f,!1,null,null,null),C=w.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"row gift-quantity-row"},[s("div",{staticStyle:{"font-size":"0"}},[s("div",{staticClass:"gift-quantity-col"},[s("span",{staticClass:"gift-form-label"},[e._v("\n\t\t\t\t\tQuantity\n\t\t\t\t\t"),e.purchaseInfo.sale_live?s("span",{staticClass:"sale-title"},[e._v("\n\t\t\t\t\t\t"+e._s(e.purchaseInfo.discount_title)+" "),s("span",{staticClass:"badge"},[e._v("25% OFF")])]):e._e()]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.purchaseInfo.quantity,expression:"purchaseInfo.quantity"}],staticClass:"gift-form-select",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.purchaseInfo,"quantity",t.target.multiple?s:s[0])}}},e._l(e.quantityOptions,(function(t,r){return s("option",{key:r,domProps:{value:t.value}},[e._v("\n\t\t\t\t\t\t"+e._s(t.text)+"\n\t\t\t\t\t")])})),0),s("span",{staticClass:"gift-form-group gift-form-select-group"},[s("span",{staticClass:"gift-form-select-description"},[e._v(e._s(e.subscriptionDescription))])]),e.purchaseInfo.discount_threshold>1?s("span",{staticClass:"gift-form-savings-label gift-form-select-description-savings"},[e._v("\n\t\t\t\t\tBuy "+e._s(e.purchaseInfo.discount_threshold)+"+ for "+e._s(e.totalDiscount)+"% off\n\t\t\t\t")]):e._e()]),s("div",{staticClass:"gift-total-col"},[s("span",{staticClass:"gift-form-total-group"},[s("span",{staticClass:"gift-form-label gift-form-total-label"},[e._v("Total")]),s("span",{staticClass:"gift-form-group"},[s("span",{staticClass:"gift-form-total"},[e.totalValue?s("span",{staticClass:"gift-form-total-savings"},[e._v(e._s(e.totalValue))]):e._e(),e._v(" $"+e._s(e.totalPrice)+"\n\t\t\t\t\t\t")])])])])])]),s("div",{staticClass:"gift-form-footer"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.buttonLabel,expression:"buttonLabel"}],attrs:{type:"submit",disabled:e.buttonEnabled},domProps:{value:e.buttonLabel},on:{click:function(t){return t.preventDefault(),e.buttonClicked(t)},input:function(t){t.target.composing||(e.buttonLabel=t.target.value)}}}),s("transition",{attrs:{name:"gift-form-message",mode:"out-in"}},[s("p",{key:e.errorMessage,staticClass:"gift-form-message"},[e._v(e._s(e.errorMessage))])]),s("p",{staticClass:"gift-form-terms"},[e._v("All prices in US dollars.")])],1)])},k=[],x=(s("6b54"),s("87b3"),{data:function(){for(var e=[],t=1;t<=20;t++)e.push({text:t.toString(),value:t});return{quantityOptions:e,accountUrl:window.m.urlAccount}},computed:{buttonLabel:function(){return this.inProgress?"Processing...":this.buttonText},buttonEnabled:function(){return this.inProgress||this.disabled},discountMessage:function(){return this.purchaseInfo.quantity<this.purchaseInfo.discount_threshold?0===this.purchaseInfo.base_discount_percent?"":this.purchaseInfo.base_discount_percent+"% off":this.purchaseInfo.discount_percent+"% off"},subscriptionDescription:function(){return"1 year Momentum Plus subscription"+(this.purchaseInfo.quantity>1?"s":"")},totalDiscount:function(){return this.purchaseInfo.discount_percent},totalPrice:function(){var e=this.purchaseInfo.unit_price;this.purchaseInfo.quantity>=this.purchaseInfo.discount_threshold?e=Math.round(this.purchaseInfo.unit_price*((100-this.totalDiscount)/100)):this.purchaseInfo.base_discount_percent&&this.purchaseInfo.quantity<this.purchaseInfo.discount_threshold&&(e=Math.round(this.purchaseInfo.unit_price*((100-this.purchaseInfo.base_discount_percent)/100)));var t=this.purchaseInfo.quantity*e/100;return t.toFixed(2)},totalValue:function(){var e=null;return this.purchaseInfo.quantity>=this.purchaseInfo.discount_threshold?(e=this.purchaseInfo.quantity*this.purchaseInfo.unit_price/100,"$"+e.toFixed(2)):""}},props:["buttonText","user","inProgress","purchaseInfo","errorMessage"],methods:{logout:function(){this.$emit("logout")},buttonClicked:function(){this.$emit("buttonClicked")}}}),S=x,P=(s("cccc"),Object(_["a"])(S,I,k,!1,null,"638e4a9d",null)),M=P.exports,O={data:function(){return{card:{name:null,number:null,expiry:null,cvc:null},emailExists:!1,errorMessage:null,inProgress:!1}},props:["user","purchaseInfo"],components:{"credit-card":C,"gift-form-buy":M},methods:{login:function(){this.$emit("login")},buyClicked:function(){var e=this.validate();if(e)return this.errorMessage=null,void this.$nextTick((function(){this.errorMessage=e}));this.inProgress=!0,this.errorMessage=null,this.$refs.creditcard.capture()},captureSuccess:function(e){var t=this,s=JSON.parse(JSON.stringify(this.purchaseInfo));s.name=this.card.name,s.email=this.user.email,s.stripe_token=e.token.id,r["default"].http.post("account/gifts",s).then((function(e){var s=e.body;s.token&&(localStorage.setItem("token",s.token),!0,s.token_uuid&&localStorage.setItem("token_uuid",s.token_uuid)),s.success?(t.purchaseInfo.coupons=s.coupons,t.purchaseInfo.gift_type=s.gift_type,t.purchaseInfo.giftSuccess=!0):(t.errorMessage=s.error_message,t.purchaseInfo.errorMessage=s.error_message,s.token&&(t.user.refreshStateRequested=!0)),t.inProgress=!1}),(function(e){t.errorMessage="There was an error purchasing the gift.",t.inProgress=!1}))},captureFailed:function(e){this.inProgress=!1,this.errorMessage=e.error},resetState:function(){this.inProgress=!1,this.errorMessage=null},useOtherEmail:function(){this.user.email="",this.emailExists=!1},onEmailBlur:function(){this.emailTimeoutID&&window.clearTimeout(this.emailTimeoutID),this.checkEmailExists()},onEmailKeyup:function(e){"Meta"!=e.key&&"Alt"!=e.key&&"Shift"!=e.key&&"Control"!=e.key&&(this.emailTimeoutID&&window.clearTimeout(this.emailTimeoutID),this.emailTimeoutID=window.setTimeout(this.checkEmailExists,250))},checkEmailExists:function(){var e=this,t=e.user,s=t.email;if(s&&s.length>7&&s.indexOf("@")>-1&&s.indexOf(".")>-1){var a=s.split(".");if(a[a.length-1].length>1){var n="user-search?email="+encodeURIComponent(s);r["default"].http.get(n).then((function(r){r.ok&&s==t.email&&(e.emailExists=!0)}),(function(r){s==t.email&&(e.emailExists=!1)}))}else e.emailExists=!1}else e.emailExists=!1},validate:function(){return this.card.name&&0!=this.card.name.length?this.user.email&&0!=this.user.email.length?/^.+@.+$/.test(this.user.email)?null:"Please enter a valid email address.":"Please enter your email address.":"Please enter your name."}}},E=O,$=Object(_["a"])(E,c,l,!1,null,null,null),L=$.exports,N=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"gift-form-login"},[s("h2",[e._v("Login to Momentum")]),s("p",{staticClass:"subheading gift-form-subheading"},[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.back(t)}}},[e._v("← "+e._s(e.backLabel))])]),s("form",{attrs:{id:"gift-form-login"},on:{submit:function(t){return t.preventDefault(),e.doLogin(t)}}},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.user.email,expression:"user.email",modifiers:{trim:!0}}],staticClass:"email",attrs:{type:"text",placeholder:"Email"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"password",attrs:{type:"password",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),s("div",{staticClass:"gift-form-footer"},[s("input",{class:this.inProgress?"button-logging-in":null,attrs:{type:"submit",disabled:e.inProgress},domProps:{value:e.loginLabel}}),s("transition",{attrs:{name:"gift-form-message",mode:"out-in"}},[s("p",{key:e.errorMessage,staticClass:"gift-form-message"},[e._v(e._s(e.errorMessage))])]),s("p",{staticClass:"gift-form-terms"},[e._v("Trouble logging in? "),s("a",{attrs:{target:"_blank",href:e.passwordResetUrl}},[e._v("Set new password")])])],1)])])},D=[],T={data:function(){return{password:null,inProgress:!1,errorMessage:null}},props:["user","backLabel"],computed:{loginLabel:function(){return this.inProgress?"Logging in...":"Login"},passwordResetUrl:function(){var e=this.user,t=window.m.urlAccount+"/set-password";return e.email&&e.email.length>7&&(t=t+"?email="+encodeURIComponent(e.email)),t}},created:function(){var e=this;this.$watch("user.refreshStateRequested",(function(t,s){t!=s&&e.refreshUserState()}))},mounted:function(){localStorage.getItem("token")?(this.user.loggedIn=!0,this.refreshUserState()):this.user.loggedIn=!1},methods:{back:function(){this.$emit("back")},doLogin:function(){var e=this;this.inProgress=!0;var t={username:this.user.email,password:this.password},s=this.validate();if(s)return this.errorMessage=null,this.$nextTick((function(){this.errorMessage=s})),void(this.inProgress=!1);r["default"].http.post("user/authenticate?c=1",t).then((function(t){if(t.ok&&t.body.token)return localStorage.setItem("token",t.body.token),t.body.token_uuid&&localStorage.setItem("token_uuid",t.body.token_uuid),e.user.autoLoggedIn=!1,e.user.loggedIn=!0,e.refreshUserState(),void(e.inProgress=!1);e.inProgress=!1}),(function(t){e.errorMessage=null,e.$nextTick((function(){e.errorMessage="We were unable to log you in."})),e.inProgress=!1}))},refreshUserState:function(){var e=this;r["default"].http.get("user/me").then((function(t){t.ok&&t.body&&t.body.userValid&&(e.user.userValid=t.body.userValid,e.user.email=t.body.email,e.user.name=t.body.name,e.user.active_subscription=t.body.active_subscription,null==e.user.autoLoggedIn&&(e.user.autoLoggedIn=!0),e.user.loggedIn=!0,e.$emit("loginComplete"))}),(function(t){e.user.loggedIn=!1}))},validate:function(){return this.user.email||this.password?this.user.email?this.password?null:"Please enter your password.":"Please enter your email address.":"Please fill in your email and password for your account. If you do not have account, please click 'Back' above and fill out the form."}}},F=T,q=Object(_["a"])(F,N,D,!1,null,null,null),j=q.exports,U=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h2",[e._v("Buy a gift for someone special today")]),s("p",{staticClass:"subheading gift-form-subheading"},[e.displayName?s("span",[e._v("Welcome, "+e._s(e.displayName)+"・")]):e._e(),s("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.logout(t)}}},[e._v("Logout")])]),s("form",{staticClass:"gift-form-logged-in"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.useOtherCard,expression:"!useOtherCard"}],staticClass:"gift-have-card-container"},[s("div",{staticClass:"row has-margin"},[s("div",{staticClass:"col"},[s("span",{staticClass:"gift-form-label"},[e._v("Card")]),e.cardInfo.defaultCard?s("span",{staticClass:"need-centering existing-card-label"},[e._v(e._s(e.cardInfo.defaultCard.brand)+" ending in "),s("strong",[e._v(e._s(e.cardInfo.defaultCard.last4))])]):e._e()]),s("div",{staticClass:"col float-right"},[s("span",{staticClass:"gift-form-action gift-add-card-toggle",on:{click:e.useOther}},[e._v("Use other credit card")])])])]),s("credit-card",{directives:[{name:"show",rawName:"v-show",value:e.useOtherCard,expression:"useOtherCard"}],ref:"creditcard",attrs:{card:e.card,showCancel:e.showCancel,showCardName:!0},on:{cancel:e.creditCardCancel,captureSuccess:e.purchaseGift,captureFailed:e.captureFailed,resetState:e.resetState}}),s("gift-form-buy",{attrs:{purchaseInfo:e.purchaseInfo,buttonText:"Buy Gift",inProgress:e.inProgress,errorMessage:e.errorMessage},on:{buttonClicked:e.buyClicked}})],1)])},A=[],B={data:function(){return{card:{name:null,number:null,expiry:null,cvc:null},useOtherCard:!1,errorMessage:null,inProgress:!1,showTitle:!0,showCancel:!0,paymentMethods:{defaultCard:null,cards:null,customer:null}}},props:["user","purchaseInfo"],components:{"credit-card":C,"gift-form-buy":M},computed:{displayName:function(){return this.user.autoLoggedIn?this.user.name+" ("+this.user.email+")":this.user.name},cardInfo:function(){return this.paymentMethods.cards&&this.paymentMethods.cards.length>0?this.paymentMethods.defaultCard=this.paymentMethods.cards[0]:this.paymentMethods.defaultCard=null,this.paymentMethods}},created:function(){this.refreshPaymentMethod();var e=this;this.$watch("purchaseInfo.errorMessage",(function(t,s){e.purchaseInfo.errorMessage&&(e.errorMessage=null),e.$nextTick((function(){e.errorMessage=e.purchaseInfo.errorMessage}))}))},methods:{buyClicked:function(){var e=this,t=(this.card,this.user,null);t?this.errorMessage=t:(this.inProgress=!0,this.errorMessage=null,e.useOtherCard?this.$refs.creditcard.capture():this.purchaseGift({source_id:e.paymentMethods.defaultCard.id}))},purchaseGift:function(e){var t=this;if(e.token)t.purchaseInfo.stripe_token=e.token.id;else{if(!e.source_id)return t.errorMessage="No card on file - please enter a credit card",t.inProgress=!1,void(t.useOtherCard=!0);t.purchaseInfo.source_id=e.source_id}r["default"].http.post("account/gifts",t.purchaseInfo).then((function(e){var s=e.body;s.success?(t.purchaseInfo.coupons=s.coupons,t.purchaseInfo.gift_type=s.gift_type,t.purchaseInfo.giftSuccess=!0):t.errorMessage=s.error_message,t.inProgress=!1}),(function(e){t.errorMessage="There was an error purchasing the gift",t.inProgress=!1}))},refreshPaymentMethod:function(){var e=this;r["default"].http.get("account/paymentmethods").then((function(t){if(t.ok&&t.body)return e.paymentMethods.cards=t.body.cards,void(t.body.cards&&t.body.cards.length>0?(e.showCancel=!0,e.useOtherCard=!1):(e.showCancel=!1,e.useOther()));e.showCancel=!1,e.useOtherCard=!0}),(function(t){e.showCancel=!1,e.useOtherCard=!0}))},captureFailed:function(e){this.inProgress=!1,this.errorMessage=e.error},resetState:function(){this.inProgress=!1,this.errorMessage=null},useOther:function(){this.card.name||(this.card.name=this.user.name),this.useOtherCard=!0},creditCardCancel:function(){this.useOtherCard=!1},logout:function(){this.$emit("logout")}}},V=B,G=Object(_["a"])(V,U,A,!1,null,"43f51ec7",null),R=G.exports,H=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h2",[e._v("Thank you!")]),s("p",{staticClass:"subheading gift-form-subheading"},[e._v("We have emailed you a receipt for your purchase.")]),s("h4",[e._v("Gift codes")]),e._l(e.purchaseInfo.coupons,(function(t){return s("p",{staticClass:"gift-code-group"},[s("span",{staticClass:"gift-code"},[e._v(e._s(t))]),s("span",{staticClass:"gift-code-description"},[e._v(e._s(e.purchaseInfo.gift_type))])])})),e._m(0),s("p",{staticClass:"gift-note"},[s("span",{staticClass:"gift-code-question"},[e._v("Not ready to redeem?")]),s("br"),s("span",{staticClass:"gift-code-answer"},[e._v("Gift Codes can be accessed anytime from your "),s("a",{attrs:{href:e.accountUrl,target:"_blank"}},[e._v("Profile")]),e._v(".")])])],2)},z=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"gift-note"},[s("a",{attrs:{href:"/redeem"}},[e._v("Redeem")])])}],W={data:function(){return{showCoupons:!0,accountUrl:window.m.urlAccount}},props:["purchaseInfo"],mounted:function(){}},J=W,K=Object(_["a"])(J,H,z,!1,null,null,null),Y=K.exports,Q={data:function(){return{sectionState:{showLoggedIn:!1,showLogin:!1,showAnonymous:!1,showPurchased:!1},testMode:!1}},props:["user","purchaseInfo"],created:function(){var e=this,t=this.getParameterByName("test");if(this.refreshFormState(),t)return this.showSection(t),void(this.testMode=!0);this.$watch("user.loggedIn",(function(t,s){e.user.loggedin&&e.showSection("loggedIn")})),this.$watch("user.autoLoggedIn",(function(t,s){e.user.autoLoggedIn&&e.showSection("loggedIn")})),this.$watch("purchaseInfo.giftSuccess",(function(e,t){if(e&&(this.showSection("purchased"),window&&window.ga))try{window.ga("send","event","Gift","Gift Purchased")}catch(s){}}))},components:{"gift-form-anonymous":L,"gift-form-login":j,"gift-form-logged-in":R,"gift-purchased":Y},methods:{logout:function(){localStorage.removeItem("token"),localStorage.removeItem("token_uuid"),this.showSection("login")},showSection:function(e){if(!this.testMode){this.sectionState;r["default"].set(this.sectionState,"showLoggedIn","loggedIn"==e),r["default"].set(this.sectionState,"showLogin","login"==e),r["default"].set(this.sectionState,"showAnonymous","anonymous"==e),r["default"].set(this.sectionState,"showPurchased","purchased"==e)}},login:function(){this.showSection("login")},refreshFormState:function(){this.user.loggedIn?this.showSection("loggedIn"):this.showSection("anonymous")},getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var s=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),r=s.exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}}},X=Q,Z=Object(_["a"])(X,i,u,!1,null,null,null),ee=Z.exports,te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"gift-testimonials"},[s("p",{staticClass:"gift-testimonial-body"},[e._v("“"+e._s(e.body)+"”")]),s("p",{staticClass:"gift-testimonial-source"},[s("span",{staticClass:"testimonial-photo"}),e._v(e._s(e.source))])])},se=[],re={data:function(){return{body:"Phenomenal, way beyond expectations. Love the images; Plus is well worth the customization and integration with my task manager. Awesome.",source:"Kevin L."}}},ae=re,ne=Object(_["a"])(ae,te,se,!1,null,null,null),oe=ne.exports,ie={data:function(){return{user:{email:null,name:null,autoLoggedIn:null,loggedIn:null,refreshStateRequested:!1},purchaseInfo:{sale_live:this.getValueOrDefault(m.saleInfo.live,!1),base_discount_percent:this.getValueOrDefault(m.saleInfo.live?m.saleInfo.baseDiscountPercent:0,0),gift_type_uuid:this.getValueOrDefault(m.saleInfo.giftTypeUuid,"45FBDE7D-FE64-4974-8141-A19FA0DFFF5C"),unit_price:this.getValueOrDefault(Math.round(100*m.saleInfo.regularYear),3995),discount_threshold:this.getValueOrDefault(m.saleInfo.discountThreshold,2),discount_percent:this.getValueOrDefault(m.saleInfo.quantityDiscountPercent,20),discount_title:m.saleInfo.live?m.saleInfo.title:"",discount_description:m.saleInfo.live?m.saleInfo.description:"",quantity:1,coupons:null,gift_type:null,giftSuccess:!1,errorMessage:null}}},components:{"gift-form-section":ee,"gift-testimonials":oe},methods:{getValueOrDefault:function(e,t){return"undefined"===typeof e?t:e}}},ue=ie,ce=Object(_["a"])(ue,n,o,!1,null,null,null),le=ce.exports,de=s("70c8");r["default"].use(a["a"]);new r["default"]({el:"#app",mixins:[de["a"]],render:function(e){return e(le)}})},cccc:function(e,t,s){"use strict";var r=s("52c4"),a=s.n(r);a.a}});
//# sourceMappingURL=gift.338c1adb.js.map